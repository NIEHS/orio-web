{% extends "base.html" %}


{% block title %}{{object}}{% endblock %}


{% block mid_content %}
  <h1>{{object}}</h1>
  <div id="heatmap"></div>

  <form>
    <label>Start</label><input name="start" value="0"><br>
    <label>Width</label><input name="width" value="-1"><br>
    <button type="submit">Update</button>
  </form>
{% endblock mid_content %}


{% block extra_js %}
<script type="text/javascript" src="{{STATIC_URL}}/js/heatmap.js"></script>
<script type="text/javascript">
$(document).ready(function(){

    var root = $('#heatmap'),
        plotRoot = "{% url 'genomics:api:result-plot-data2' object.id %}";

    $("form").submit(function(e){
        e.preventDefault();
        var start = $("input[name='start']").val(),
            width = $("input[name='width']").val(),
            params = {"start": start, "width": width};

        $.get(plotRoot, params, function(d){
            root.empty();
            new Heatmap(d);
        });

    }).trigger('submit');

});
</script>
{% endblock extra_js %}
